// Package preflight_kit_api provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.4.1 DO NOT EDIT.
package preflight_kit_api

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"encoding/json"
	"errors"
	"fmt"
	"net/url"
	"path"
	"strings"
	"time"

	"github.com/getkin/kin-openapi/openapi3"
	"github.com/google/uuid"
	"github.com/oapi-codegen/runtime"
	openapi_types "github.com/oapi-codegen/runtime/types"
)

// Defines values for ExperimentExecutionAOCreatedVia.
const (
	ExperimentExecutionAOCreatedViaAPI      ExperimentExecutionAOCreatedVia = "API"
	ExperimentExecutionAOCreatedViaCLI      ExperimentExecutionAOCreatedVia = "CLI"
	ExperimentExecutionAOCreatedViaSCHEDULE ExperimentExecutionAOCreatedVia = "SCHEDULE"
	ExperimentExecutionAOCreatedViaUI       ExperimentExecutionAOCreatedVia = "UI"
)

// Defines values for ExperimentExecutionStepActionAOActionKind.
const (
	ATTACK   ExperimentExecutionStepActionAOActionKind = "ATTACK"
	BASIC    ExperimentExecutionStepActionAOActionKind = "BASIC"
	CHECK    ExperimentExecutionStepActionAOActionKind = "CHECK"
	LOADTEST ExperimentExecutionStepActionAOActionKind = "LOAD_TEST"
	OTHER    ExperimentExecutionStepActionAOActionKind = "OTHER"
)

// Defines values for ExperimentExecutionStepActionAOStepType.
const (
	ACTION ExperimentExecutionStepActionAOStepType = "ACTION"
)

// Defines values for ExperimentExecutionStepWaitAOStepType.
const (
	WAIT ExperimentExecutionStepWaitAOStepType = "WAIT"
)

// Defines values for ExperimentExecutionVariableAOOrigin.
const (
	ExperimentExecutionVariableAOOriginENVIRONMENT ExperimentExecutionVariableAOOrigin = "ENVIRONMENT"
	ExperimentExecutionVariableAOOriginEXECUTION   ExperimentExecutionVariableAOOrigin = "EXECUTION"
	ExperimentExecutionVariableAOOriginEXPERIMENT  ExperimentExecutionVariableAOOrigin = "EXPERIMENT"
	ExperimentExecutionVariableAOOriginSCHEDULE    ExperimentExecutionVariableAOOrigin = "SCHEDULE"
)

// Defines values for MutatingHttpMethod.
const (
	DELETE MutatingHttpMethod = "DELETE"
	POST   MutatingHttpMethod = "POST"
	PUT    MutatingHttpMethod = "PUT"
)

// Defines values for PreflightKitErrorStatus.
const (
	Errored PreflightKitErrorStatus = "errored"
	Failed  PreflightKitErrorStatus = "failed"
)

// Defines values for ReadHttpMethod.
const (
	GET ReadHttpMethod = "GET"
)

// AbstractExperimentExecutionStepAO A step that is executed as part of an experiment.
type AbstractExperimentExecutionStepAO struct {
	// CustomLabel Custom label assigned during experiment design to express the intention of this step
	CustomLabel *string `json:"customLabel,omitempty"`

	// Ended Timestamp when this experiment step ended
	Ended *time.Time `json:"ended,omitempty"`

	// Id Unique identifier of this step execution
	Id *openapi_types.UUID `json:"id,omitempty"`

	// IgnoreFailure Whether the experiment should fail/error immediately in case this step fails/errors.
	IgnoreFailure *bool `json:"ignoreFailure,omitempty"`

	// Parameters Step-specific parameters of the experiment step configuration
	Parameters *map[string]map[string]interface{} `json:"parameters,omitempty"`

	// PredecessorId Unique identifier of the step execution that precedes this step, null if it is the first step of a lane
	PredecessorId *openapi_types.UUID `json:"predecessorId,omitempty"`

	// Reason Reason in case this experiment step execution failed or errored
	Reason *string `json:"reason,omitempty"`

	// Started Timestamp when this experiment step was started
	Started *time.Time `json:"started,omitempty"`

	// State Current state of this step in the experiment (e.g. RUNNING, FAILED, ERRORED, COMPLETED)
	State *string `json:"state,omitempty"`

	// StepType Type of the step (e.g. ACTION, WAIT)
	StepType string `json:"stepType"`
	union    json.RawMessage
}

// AttributeAO An attributes (key-value-pair) that is associated to a target
type AttributeAO struct {
	// Key The key of the attribute, may be associated multiple times to the same target
	Key string `json:"key"`

	// Value The value of the attribute
	Value string `json:"value"`
}

// BlastRadiusAO Blast radius that is applied to define the set of targets as well as an optional random subset
type BlastRadiusAO struct {
	// Maximum In case a fixed number of as subset of specified targets should be effected
	Maximum *int32 `json:"maximum,omitempty"`

	// Percentage In case a percentage subset of the specified targets should be effected
	Percentage *int32 `json:"percentage,omitempty"`

	// Predicate Query defining the overall superset of targets being effected
	Predicate *TargetPredicate `json:"predicate,omitempty"`

	// TargetType Target type that is effected by that action
	TargetType *string `json:"targetType,omitempty"`
}

// CancelResult defines model for CancelResult.
type CancelResult struct {
	// Error An enhanced version of RFC 7807 Problem Details for HTTP APIs compliant response body for error scenarios
	Error *PreflightKitError `json:"error,omitempty"`
}

// DescribingEndpointReference HTTP endpoint which the Steadybit platform/agent could communicate with.
type DescribingEndpointReference struct {
	Method ReadHttpMethod `json:"method"`

	// Path Absolute path of the HTTP endpoint.
	Path string `json:"path"`
}

// ExperimentExecutionAO A single experiment execution that was triggered from a single experiment.
type ExperimentExecutionAO struct {
	// CanceledBy The user that connected the hub
	CanceledBy *UserSummaryAO `json:"canceledBy,omitempty"`

	// Created Timestamp when the experiment was created
	Created *time.Time `json:"created,omitempty"`

	// CreatedBy The user that connected the hub
	CreatedBy *UserSummaryAO `json:"createdBy,omitempty"`

	// CreatedVia The creation trigger that caused this experiment execution to be started
	CreatedVia *ExperimentExecutionAOCreatedVia `json:"createdVia,omitempty"`

	// Ended Timestamp when the experiment ended
	Ended *time.Time `json:"ended,omitempty"`

	// ExperimentVersion Experiment design version which can be used to identify changes between experiment runs
	ExperimentVersion *int32 `json:"experimentVersion,omitempty"`

	// Hypothesis The hypothesis that is validated by the experiment
	Hypothesis *string `json:"hypothesis,omitempty"`

	// Id Unique experiment execution id that identifies this specific experiment execution
	Id *int32 `json:"id,omitempty"`

	// Key Unique experiment key that identifies the experiment. Combination of `team key` and increasing number
	Key *string `json:"key,omitempty"`

	// Name Name of the experiment to easily identify the experiment
	Name *string `json:"name,omitempty"`

	// Reason Reason in case the experiment execution failed or errored
	Reason *string `json:"reason,omitempty"`

	// Requested Timestamp when the experiment was requested
	Requested *time.Time `json:"requested,omitempty"`

	// Started Timestamp when the experiment was started
	Started *time.Time `json:"started,omitempty"`

	// State Current state of the experiment (e.g. CREATED, RUNNING, FAILED, ERRORED, COMPLETED)
	State *string `json:"state,omitempty"`

	// Steps The steps that are executed in parallel or sequence in the experiment.
	Steps *[]AbstractExperimentExecutionStepAO `json:"steps,omitempty"`

	// Variables Variables and their origins that have been used for this execution
	Variables *map[string]ExperimentExecutionVariableAO `json:"variables,omitempty"`
}

// ExperimentExecutionAOCreatedVia The creation trigger that caused this experiment execution to be started
type ExperimentExecutionAOCreatedVia string

// ExperimentExecutionStepActionAO An action-step that is executed as part of an experiment.
type ExperimentExecutionStepActionAO struct {
	// ActionId Unique identifier of the action that is executed in this step
	ActionId *string `json:"actionId,omitempty"`

	// ActionKind Kind of the action (e.g. attack, check, loadtest)
	ActionKind *ExperimentExecutionStepActionAOActionKind `json:"actionKind,omitempty"`

	// CustomLabel Custom label assigned during experiment design to express the intention of this step
	CustomLabel *string `json:"customLabel,omitempty"`

	// Ended Timestamp when this experiment step ended
	Ended *time.Time `json:"ended,omitempty"`

	// Id Unique identifier of this step execution
	Id *openapi_types.UUID `json:"id,omitempty"`

	// IgnoreFailure Whether the experiment should fail/error immediately in case this step fails/errors.
	IgnoreFailure *bool `json:"ignoreFailure,omitempty"`

	// Parameters Step-specific parameters of the experiment step configuration
	Parameters *map[string]map[string]interface{} `json:"parameters,omitempty"`

	// PredecessorId Unique identifier of the step execution that precedes this step, null if it is the first step of a lane
	PredecessorId *openapi_types.UUID `json:"predecessorId,omitempty"`

	// Radius Blast radius that is applied to define the set of targets as well as an optional random subset
	Radius *BlastRadiusAO `json:"radius,omitempty"`

	// Reason Reason in case this experiment step execution failed or errored
	Reason *string `json:"reason,omitempty"`

	// Started Timestamp when this experiment step was started
	Started *time.Time `json:"started,omitempty"`

	// State Current state of this step in the experiment (e.g. RUNNING, FAILED, ERRORED, COMPLETED)
	State    *string                                 `json:"state,omitempty"`
	StepType ExperimentExecutionStepActionAOStepType `json:"stepType"`

	// TargetExecutions List of targets that are expected to be effected by this action. This list may change in case targets aren't available at the specific time of execution
	TargetExecutions *[]TargetAO `json:"targetExecutions,omitempty"`

	// TotalTargetCount Amount of targets that are effect int total
	TotalTargetCount *int64 `json:"totalTargetCount,omitempty"`
}

// ExperimentExecutionStepActionAOActionKind Kind of the action (e.g. attack, check, loadtest)
type ExperimentExecutionStepActionAOActionKind string

// ExperimentExecutionStepActionAOStepType defines model for ExperimentExecutionStepActionAO.StepType.
type ExperimentExecutionStepActionAOStepType string

// ExperimentExecutionStepWaitAO A wait step that is executed as part of an experiment.
type ExperimentExecutionStepWaitAO struct {
	// CustomLabel Custom label assigned during experiment design to express the intention of this step
	CustomLabel *string `json:"customLabel,omitempty"`

	// Ended Timestamp when this experiment step ended
	Ended *time.Time `json:"ended,omitempty"`

	// Id Unique identifier of this step execution
	Id *openapi_types.UUID `json:"id,omitempty"`

	// IgnoreFailure Whether the experiment should fail/error immediately in case this step fails/errors.
	IgnoreFailure *bool `json:"ignoreFailure,omitempty"`

	// Parameters Step-specific parameters of the experiment step configuration
	Parameters *map[string]map[string]interface{} `json:"parameters,omitempty"`

	// PredecessorId Unique identifier of the step execution that precedes this step, null if it is the first step of a lane
	PredecessorId *openapi_types.UUID `json:"predecessorId,omitempty"`

	// Reason Reason in case this experiment step execution failed or errored
	Reason *string `json:"reason,omitempty"`

	// Started Timestamp when this experiment step was started
	Started *time.Time `json:"started,omitempty"`

	// State Current state of this step in the experiment (e.g. RUNNING, FAILED, ERRORED, COMPLETED)
	State    *string                               `json:"state,omitempty"`
	StepType ExperimentExecutionStepWaitAOStepType `json:"stepType"`
}

// ExperimentExecutionStepWaitAOStepType defines model for ExperimentExecutionStepWaitAO.StepType.
type ExperimentExecutionStepWaitAOStepType string

// ExperimentExecutionVariableAO Variables and their origins that have been used for this execution
type ExperimentExecutionVariableAO struct {
	Origin *ExperimentExecutionVariableAOOrigin `json:"origin,omitempty"`
	Value  *string                              `json:"value,omitempty"`
}

// ExperimentExecutionVariableAOOrigin defines model for ExperimentExecutionVariableAO.Origin.
type ExperimentExecutionVariableAOOrigin string

// MutatingEndpointReference HTTP endpoint which the Steadybit platform/agent could communicate with.
type MutatingEndpointReference struct {
	Method MutatingHttpMethod `json:"method"`

	// Path Absolute path of the HTTP endpoint.
	Path string `json:"path"`
}

// MutatingEndpointReferenceWithCallInterval defines model for MutatingEndpointReferenceWithCallInterval.
type MutatingEndpointReferenceWithCallInterval struct {
	// CallInterval At what frequency should the state endpoint be called? Takes durations in the format of `100ms` or `10s`.
	CallInterval *string            `json:"callInterval,omitempty"`
	Method       MutatingHttpMethod `json:"method"`

	// Path Absolute path of the HTTP endpoint.
	Path string `json:"path"`
}

// MutatingHttpMethod defines model for MutatingHttpMethod.
type MutatingHttpMethod string

// PreflightDescription Provides details about a possible preflight, e.g., what configuration options it has, how to present it to end-users and how to trigger the preflight.
type PreflightDescription struct {
	// Cancel HTTP endpoint which the Steadybit platform/agent could communicate with.
	Cancel *MutatingEndpointReference `json:"cancel,omitempty"`

	// Description Description for end-users to help them understand what the preflight is doing.
	Description string `json:"description"`

	// Icon An icon that is used to identify your preflight in the ui. Needs to be a data-uri containing an image.
	Icon *string `json:"icon,omitempty"`

	// Id A technical ID that is used to uniquely identify this type of preflight. You will typically want to use something like `org.example.my-fancy-preflight`.
	Id string `json:"id"`

	// Label A human-readable label for the preflight.
	Label string `json:"label"`

	// Start HTTP endpoint which the Steadybit platform/agent could communicate with.
	Start MutatingEndpointReference `json:"start"`

	// Status HTTP endpoint which the Steadybit platform/agent could communicate with.
	Status MutatingEndpointReferenceWithCallInterval `json:"status"`

	// TargetAttributeIncludes A list of attributes of targets that are populated to the preflight in the experiment execution. If the list is empty, no attributes are populated.
	TargetAttributeIncludes []string `json:"targetAttributeIncludes"`

	// Version The version of the preflight. Remember to increase the value everytime you update the definitions. The platform will ignore any definition changes with the same preflight version. We do recommend usage of semver strings.
	Version string `json:"version"`
}

// PreflightKitError An enhanced version of RFC 7807 Problem Details for HTTP APIs compliant response body for error scenarios
type PreflightKitError struct {
	// Detail A human-readable explanation specific to this occurrence of the problem.
	Detail *string `json:"detail,omitempty"`

	// Instance A URI reference that identifies the specific occurrence of the problem.
	Instance *string `json:"instance,omitempty"`

	// Status * failed - The preflight has detected some failures, for example a failing test which has been implemented by the preflight. The preflight will be canceled, if this status is returned by the status endpoint. * errored - There was a technical error while executing the preflight. Will be marked as red in the platform. The preflight will be canceled, if this status is returned by the status endpoint.
	Status *PreflightKitErrorStatus `json:"status,omitempty"`

	// Title A short, human-readable summary of the problem type.
	Title string `json:"title"`

	// Type A URI reference that identifies the problem type.
	Type *string `json:"type,omitempty"`
}

// PreflightKitErrorStatus * failed - The preflight has detected some failures, for example a failing test which has been implemented by the preflight. The preflight will be canceled, if this status is returned by the status endpoint. * errored - There was a technical error while executing the preflight. Will be marked as red in the platform. The preflight will be canceled, if this status is returned by the status endpoint.
type PreflightKitErrorStatus string

// PreflightList Lists all preflights that the platform/agent could execute.
type PreflightList struct {
	Preflights []DescribingEndpointReference `json:"preflights"`
}

// ReadHttpMethod defines model for ReadHttpMethod.
type ReadHttpMethod string

// StartResult defines model for StartResult.
type StartResult struct {
	// Error An enhanced version of RFC 7807 Problem Details for HTTP APIs compliant response body for error scenarios
	Error *PreflightKitError `json:"error,omitempty"`
}

// StatusResult defines model for StatusResult.
type StatusResult struct {
	// Completed the agent will continue to poll the status endpoint as long as completed is false and no error is set
	Completed bool `json:"completed"`

	// Error An enhanced version of RFC 7807 Problem Details for HTTP APIs compliant response body for error scenarios
	Error *PreflightKitError `json:"error,omitempty"`
}

// TargetAO A target that is expected to be effected by this action.
type TargetAO struct {
	// AgentHostname The agent that processed this target-action command and forwarded it to the proper extension instance.
	AgentHostname *string `json:"agentHostname,omitempty"`

	// Attributes A set of attributes that have been discovered for this target. A key may be associated multiple time to a single target.
	Attributes *[]AttributeAO `json:"attributes,omitempty"`

	// Name Identifier of the target that is expected to be effected
	Name *string `json:"name,omitempty"`

	// Reason Reason on a per target-level why the experiment failed or errored. If this step didn't failed or errored (`state != 'FAILED' and state != 'ERRORED') the reason is `null`.
	Reason *string `json:"reason,omitempty"`

	// ReasonDetails Optional additional reason details on a per target-level why the the experiment failed or errored.
	ReasonDetails *string `json:"reasonDetails,omitempty"`

	// Source The source (i.e. call to the extension) that caused the step to error or fail.
	Source *string `json:"source,omitempty"`

	// State State of this specific step on a per target-level.
	State *string `json:"state,omitempty"`

	// Type Type of the target that is expected to be effected
	Type *string `json:"type,omitempty"`
}

// TargetPredicate Query defining the overall superset of targets being effected
type TargetPredicate = map[string]interface{}

// UserSummaryAO The user that connected the hub
type UserSummaryAO struct {
	Email      *string `json:"email,omitempty"`
	Name       *string `json:"name,omitempty"`
	PictureUrl *string `json:"pictureUrl,omitempty"`
	Username   *string `json:"username,omitempty"`
}

// CancelPreflightResponse defines model for CancelPreflightResponse.
type CancelPreflightResponse struct {
	union json.RawMessage
}

// DescribePreflightResponse defines model for DescribePreflightResponse.
type DescribePreflightResponse struct {
	union json.RawMessage
}

// PreflightListResponse defines model for PreflightListResponse.
type PreflightListResponse struct {
	union json.RawMessage
}

// PreflightStatusResponse defines model for PreflightStatusResponse.
type PreflightStatusResponse struct {
	union json.RawMessage
}

// StartPreflightResponse defines model for StartPreflightResponse.
type StartPreflightResponse struct {
	union json.RawMessage
}

// CancelPreflightRequestBody defines model for CancelPreflightRequestBody.
type CancelPreflightRequestBody struct {
	PreflightActionExecutionId uuid.UUID `json:"preflightActionExecutionId"`
}

// StartPreflightRequestBody defines model for StartPreflightRequestBody.
type StartPreflightRequestBody struct {
	// ExperimentExecution A single experiment execution that was triggered from a single experiment.
	ExperimentExecution        ExperimentExecutionAO `json:"experimentExecution"`
	PreflightActionExecutionId uuid.UUID             `json:"preflightActionExecutionId"`
}

// StatusPreflightRequestBody defines model for StatusPreflightRequestBody.
type StatusPreflightRequestBody struct {
	PreflightActionExecutionId uuid.UUID `json:"preflightActionExecutionId"`
}

// AsExperimentExecutionStepActionAO returns the union data inside the AbstractExperimentExecutionStepAO as a ExperimentExecutionStepActionAO
func (t AbstractExperimentExecutionStepAO) AsExperimentExecutionStepActionAO() (ExperimentExecutionStepActionAO, error) {
	var body ExperimentExecutionStepActionAO
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromExperimentExecutionStepActionAO overwrites any union data inside the AbstractExperimentExecutionStepAO as the provided ExperimentExecutionStepActionAO
func (t *AbstractExperimentExecutionStepAO) FromExperimentExecutionStepActionAO(v ExperimentExecutionStepActionAO) error {
	t.StepType = "ACTION"

	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergeExperimentExecutionStepActionAO performs a merge with any union data inside the AbstractExperimentExecutionStepAO, using the provided ExperimentExecutionStepActionAO
func (t *AbstractExperimentExecutionStepAO) MergeExperimentExecutionStepActionAO(v ExperimentExecutionStepActionAO) error {
	t.StepType = "ACTION"

	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

// AsExperimentExecutionStepWaitAO returns the union data inside the AbstractExperimentExecutionStepAO as a ExperimentExecutionStepWaitAO
func (t AbstractExperimentExecutionStepAO) AsExperimentExecutionStepWaitAO() (ExperimentExecutionStepWaitAO, error) {
	var body ExperimentExecutionStepWaitAO
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromExperimentExecutionStepWaitAO overwrites any union data inside the AbstractExperimentExecutionStepAO as the provided ExperimentExecutionStepWaitAO
func (t *AbstractExperimentExecutionStepAO) FromExperimentExecutionStepWaitAO(v ExperimentExecutionStepWaitAO) error {
	t.StepType = "WAIT"

	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergeExperimentExecutionStepWaitAO performs a merge with any union data inside the AbstractExperimentExecutionStepAO, using the provided ExperimentExecutionStepWaitAO
func (t *AbstractExperimentExecutionStepAO) MergeExperimentExecutionStepWaitAO(v ExperimentExecutionStepWaitAO) error {
	t.StepType = "WAIT"

	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

func (t AbstractExperimentExecutionStepAO) Discriminator() (string, error) {
	var discriminator struct {
		Discriminator string `json:"stepType"`
	}
	err := json.Unmarshal(t.union, &discriminator)
	return discriminator.Discriminator, err
}

func (t AbstractExperimentExecutionStepAO) ValueByDiscriminator() (interface{}, error) {
	discriminator, err := t.Discriminator()
	if err != nil {
		return nil, err
	}
	switch discriminator {
	case "ACTION":
		return t.AsExperimentExecutionStepActionAO()
	case "WAIT":
		return t.AsExperimentExecutionStepWaitAO()
	default:
		return nil, errors.New("unknown discriminator value: " + discriminator)
	}
}

func (t AbstractExperimentExecutionStepAO) MarshalJSON() ([]byte, error) {
	b, err := t.union.MarshalJSON()
	if err != nil {
		return nil, err
	}
	object := make(map[string]json.RawMessage)
	if t.union != nil {
		err = json.Unmarshal(b, &object)
		if err != nil {
			return nil, err
		}
	}

	if t.CustomLabel != nil {
		object["customLabel"], err = json.Marshal(t.CustomLabel)
		if err != nil {
			return nil, fmt.Errorf("error marshaling 'customLabel': %w", err)
		}
	}

	if t.Ended != nil {
		object["ended"], err = json.Marshal(t.Ended)
		if err != nil {
			return nil, fmt.Errorf("error marshaling 'ended': %w", err)
		}
	}

	if t.Id != nil {
		object["id"], err = json.Marshal(t.Id)
		if err != nil {
			return nil, fmt.Errorf("error marshaling 'id': %w", err)
		}
	}

	if t.IgnoreFailure != nil {
		object["ignoreFailure"], err = json.Marshal(t.IgnoreFailure)
		if err != nil {
			return nil, fmt.Errorf("error marshaling 'ignoreFailure': %w", err)
		}
	}

	if t.Parameters != nil {
		object["parameters"], err = json.Marshal(t.Parameters)
		if err != nil {
			return nil, fmt.Errorf("error marshaling 'parameters': %w", err)
		}
	}

	if t.PredecessorId != nil {
		object["predecessorId"], err = json.Marshal(t.PredecessorId)
		if err != nil {
			return nil, fmt.Errorf("error marshaling 'predecessorId': %w", err)
		}
	}

	if t.Reason != nil {
		object["reason"], err = json.Marshal(t.Reason)
		if err != nil {
			return nil, fmt.Errorf("error marshaling 'reason': %w", err)
		}
	}

	if t.Started != nil {
		object["started"], err = json.Marshal(t.Started)
		if err != nil {
			return nil, fmt.Errorf("error marshaling 'started': %w", err)
		}
	}

	if t.State != nil {
		object["state"], err = json.Marshal(t.State)
		if err != nil {
			return nil, fmt.Errorf("error marshaling 'state': %w", err)
		}
	}

	object["stepType"], err = json.Marshal(t.StepType)
	if err != nil {
		return nil, fmt.Errorf("error marshaling 'stepType': %w", err)
	}

	b, err = json.Marshal(object)
	return b, err
}

func (t *AbstractExperimentExecutionStepAO) UnmarshalJSON(b []byte) error {
	err := t.union.UnmarshalJSON(b)
	if err != nil {
		return err
	}
	object := make(map[string]json.RawMessage)
	err = json.Unmarshal(b, &object)
	if err != nil {
		return err
	}

	if raw, found := object["customLabel"]; found {
		err = json.Unmarshal(raw, &t.CustomLabel)
		if err != nil {
			return fmt.Errorf("error reading 'customLabel': %w", err)
		}
	}

	if raw, found := object["ended"]; found {
		err = json.Unmarshal(raw, &t.Ended)
		if err != nil {
			return fmt.Errorf("error reading 'ended': %w", err)
		}
	}

	if raw, found := object["id"]; found {
		err = json.Unmarshal(raw, &t.Id)
		if err != nil {
			return fmt.Errorf("error reading 'id': %w", err)
		}
	}

	if raw, found := object["ignoreFailure"]; found {
		err = json.Unmarshal(raw, &t.IgnoreFailure)
		if err != nil {
			return fmt.Errorf("error reading 'ignoreFailure': %w", err)
		}
	}

	if raw, found := object["parameters"]; found {
		err = json.Unmarshal(raw, &t.Parameters)
		if err != nil {
			return fmt.Errorf("error reading 'parameters': %w", err)
		}
	}

	if raw, found := object["predecessorId"]; found {
		err = json.Unmarshal(raw, &t.PredecessorId)
		if err != nil {
			return fmt.Errorf("error reading 'predecessorId': %w", err)
		}
	}

	if raw, found := object["reason"]; found {
		err = json.Unmarshal(raw, &t.Reason)
		if err != nil {
			return fmt.Errorf("error reading 'reason': %w", err)
		}
	}

	if raw, found := object["started"]; found {
		err = json.Unmarshal(raw, &t.Started)
		if err != nil {
			return fmt.Errorf("error reading 'started': %w", err)
		}
	}

	if raw, found := object["state"]; found {
		err = json.Unmarshal(raw, &t.State)
		if err != nil {
			return fmt.Errorf("error reading 'state': %w", err)
		}
	}

	if raw, found := object["stepType"]; found {
		err = json.Unmarshal(raw, &t.StepType)
		if err != nil {
			return fmt.Errorf("error reading 'stepType': %w", err)
		}
	}

	return err
}

// AsCancelResult returns the union data inside the CancelPreflightResponse as a CancelResult
func (t CancelPreflightResponse) AsCancelResult() (CancelResult, error) {
	var body CancelResult
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromCancelResult overwrites any union data inside the CancelPreflightResponse as the provided CancelResult
func (t *CancelPreflightResponse) FromCancelResult(v CancelResult) error {
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergeCancelResult performs a merge with any union data inside the CancelPreflightResponse, using the provided CancelResult
func (t *CancelPreflightResponse) MergeCancelResult(v CancelResult) error {
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

// AsPreflightKitError returns the union data inside the CancelPreflightResponse as a PreflightKitError
func (t CancelPreflightResponse) AsPreflightKitError() (PreflightKitError, error) {
	var body PreflightKitError
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromPreflightKitError overwrites any union data inside the CancelPreflightResponse as the provided PreflightKitError
func (t *CancelPreflightResponse) FromPreflightKitError(v PreflightKitError) error {
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergePreflightKitError performs a merge with any union data inside the CancelPreflightResponse, using the provided PreflightKitError
func (t *CancelPreflightResponse) MergePreflightKitError(v PreflightKitError) error {
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

func (t CancelPreflightResponse) MarshalJSON() ([]byte, error) {
	b, err := t.union.MarshalJSON()
	return b, err
}

func (t *CancelPreflightResponse) UnmarshalJSON(b []byte) error {
	err := t.union.UnmarshalJSON(b)
	return err
}

// AsPreflightDescription returns the union data inside the DescribePreflightResponse as a PreflightDescription
func (t DescribePreflightResponse) AsPreflightDescription() (PreflightDescription, error) {
	var body PreflightDescription
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromPreflightDescription overwrites any union data inside the DescribePreflightResponse as the provided PreflightDescription
func (t *DescribePreflightResponse) FromPreflightDescription(v PreflightDescription) error {
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergePreflightDescription performs a merge with any union data inside the DescribePreflightResponse, using the provided PreflightDescription
func (t *DescribePreflightResponse) MergePreflightDescription(v PreflightDescription) error {
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

// AsPreflightKitError returns the union data inside the DescribePreflightResponse as a PreflightKitError
func (t DescribePreflightResponse) AsPreflightKitError() (PreflightKitError, error) {
	var body PreflightKitError
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromPreflightKitError overwrites any union data inside the DescribePreflightResponse as the provided PreflightKitError
func (t *DescribePreflightResponse) FromPreflightKitError(v PreflightKitError) error {
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergePreflightKitError performs a merge with any union data inside the DescribePreflightResponse, using the provided PreflightKitError
func (t *DescribePreflightResponse) MergePreflightKitError(v PreflightKitError) error {
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

func (t DescribePreflightResponse) MarshalJSON() ([]byte, error) {
	b, err := t.union.MarshalJSON()
	return b, err
}

func (t *DescribePreflightResponse) UnmarshalJSON(b []byte) error {
	err := t.union.UnmarshalJSON(b)
	return err
}

// AsPreflightList returns the union data inside the PreflightListResponse as a PreflightList
func (t PreflightListResponse) AsPreflightList() (PreflightList, error) {
	var body PreflightList
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromPreflightList overwrites any union data inside the PreflightListResponse as the provided PreflightList
func (t *PreflightListResponse) FromPreflightList(v PreflightList) error {
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergePreflightList performs a merge with any union data inside the PreflightListResponse, using the provided PreflightList
func (t *PreflightListResponse) MergePreflightList(v PreflightList) error {
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

// AsPreflightKitError returns the union data inside the PreflightListResponse as a PreflightKitError
func (t PreflightListResponse) AsPreflightKitError() (PreflightKitError, error) {
	var body PreflightKitError
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromPreflightKitError overwrites any union data inside the PreflightListResponse as the provided PreflightKitError
func (t *PreflightListResponse) FromPreflightKitError(v PreflightKitError) error {
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergePreflightKitError performs a merge with any union data inside the PreflightListResponse, using the provided PreflightKitError
func (t *PreflightListResponse) MergePreflightKitError(v PreflightKitError) error {
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

func (t PreflightListResponse) MarshalJSON() ([]byte, error) {
	b, err := t.union.MarshalJSON()
	return b, err
}

func (t *PreflightListResponse) UnmarshalJSON(b []byte) error {
	err := t.union.UnmarshalJSON(b)
	return err
}

// AsStatusResult returns the union data inside the PreflightStatusResponse as a StatusResult
func (t PreflightStatusResponse) AsStatusResult() (StatusResult, error) {
	var body StatusResult
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromStatusResult overwrites any union data inside the PreflightStatusResponse as the provided StatusResult
func (t *PreflightStatusResponse) FromStatusResult(v StatusResult) error {
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergeStatusResult performs a merge with any union data inside the PreflightStatusResponse, using the provided StatusResult
func (t *PreflightStatusResponse) MergeStatusResult(v StatusResult) error {
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

// AsPreflightKitError returns the union data inside the PreflightStatusResponse as a PreflightKitError
func (t PreflightStatusResponse) AsPreflightKitError() (PreflightKitError, error) {
	var body PreflightKitError
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromPreflightKitError overwrites any union data inside the PreflightStatusResponse as the provided PreflightKitError
func (t *PreflightStatusResponse) FromPreflightKitError(v PreflightKitError) error {
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergePreflightKitError performs a merge with any union data inside the PreflightStatusResponse, using the provided PreflightKitError
func (t *PreflightStatusResponse) MergePreflightKitError(v PreflightKitError) error {
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

func (t PreflightStatusResponse) MarshalJSON() ([]byte, error) {
	b, err := t.union.MarshalJSON()
	return b, err
}

func (t *PreflightStatusResponse) UnmarshalJSON(b []byte) error {
	err := t.union.UnmarshalJSON(b)
	return err
}

// AsStartResult returns the union data inside the StartPreflightResponse as a StartResult
func (t StartPreflightResponse) AsStartResult() (StartResult, error) {
	var body StartResult
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromStartResult overwrites any union data inside the StartPreflightResponse as the provided StartResult
func (t *StartPreflightResponse) FromStartResult(v StartResult) error {
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergeStartResult performs a merge with any union data inside the StartPreflightResponse, using the provided StartResult
func (t *StartPreflightResponse) MergeStartResult(v StartResult) error {
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

// AsPreflightKitError returns the union data inside the StartPreflightResponse as a PreflightKitError
func (t StartPreflightResponse) AsPreflightKitError() (PreflightKitError, error) {
	var body PreflightKitError
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromPreflightKitError overwrites any union data inside the StartPreflightResponse as the provided PreflightKitError
func (t *StartPreflightResponse) FromPreflightKitError(v PreflightKitError) error {
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergePreflightKitError performs a merge with any union data inside the StartPreflightResponse, using the provided PreflightKitError
func (t *StartPreflightResponse) MergePreflightKitError(v PreflightKitError) error {
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

func (t StartPreflightResponse) MarshalJSON() ([]byte, error) {
	b, err := t.union.MarshalJSON()
	return b, err
}

func (t *StartPreflightResponse) UnmarshalJSON(b []byte) error {
	err := t.union.UnmarshalJSON(b)
	return err
}

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
